info.onScore(3000, function () {
	
})
controller.B.onEvent(ControllerButtonEvent.Pressed, function () {
    if (info.score() > 20) {
        projectile4 = sprites.createProjectileFromSprite(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . f . . . . . . . . . . . . . . 
            f f f . . . . . . . . . . . . . 
            . . f f . . . . . . . . . . . . 
            . . . f f . . . f f f f f . . . 
            . . . . f f . . f f f f f . . . 
            . . . . . f 2 2 2 2 2 2 2 2 2 . 
            . . . . . . f f 2 2 2 2 2 f f . 
            . . . . . . f f . . . . . f f . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `, mySprite, 150, 0)
        projectile5 = sprites.createProjectileFromSprite(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . f . 
            . . . . . . . . . . . . . f f f 
            . . . . . . . . . . . . f f . . 
            . . . f f f f f . . . f f . . . 
            . . . f f f f f . . f f . . . . 
            . 2 2 2 2 2 2 2 2 2 f . . . . . 
            . f f 2 2 2 2 2 f f . . . . . . 
            . f f . . . . . f f . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `, mySprite, -150, 0)
        projectile4.startEffect(effects.smiles)
        projectile5.startEffect(effects.smiles)
        pause(5000)
    }
})
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (info.score() < 20) {
        projectile = sprites.createProjectileFromSprite(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . 9 9 . . . . . . . 
            . . . . . . . 9 9 . . . . . . . 
            . . . . . . . 9 9 . . . . . . . 
            . . . . . . . 9 9 . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `, mySprite, 0, -250)
        projectile2 = sprites.createProjectileFromSprite(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . 9 9 . . . . . . . 
            . . . . . . . 9 9 . . . . . . . 
            . . . . . . . 9 9 . . . . . . . 
            . . . . . . . 9 9 . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `, mySprite, -50, -200)
        projectile3 = sprites.createProjectileFromSprite(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . 9 9 . . . . . . . 
            . . . . . . . 9 9 . . . . . . . 
            . . . . . . . 9 9 . . . . . . . 
            . . . . . . . 9 9 . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `, mySprite, 50, -200)
        projectile.startEffect(effects.spray, 500)
        pause(300)
        sprites.destroy(projectile)
        sprites.destroy(projectile2)
        sprites.destroy(projectile3)
        pause(300)
    } else {
        projectile = sprites.createProjectileFromSprite(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . 5 . . . . . . . . 
            . . . . . . 5 5 4 . . . . . . . 
            . . . . . . 5 4 4 . . . . . . . 
            . . . . . . 4 4 4 . . . . . . . 
            . . . . . . 4 2 2 . . . . . . . 
            . . . . . . 2 2 . 2 . . . . . . 
            . . . . . 2 . 2 . 2 . . . . . . 
            . . . . . 2 . . 2 . . . . . . . 
            . . . . . . . 2 2 . . . . . . . 
            . . . . . . 2 . 2 2 . . . . . . 
            . . . . . . . . 2 . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `, mySprite, 0, -400)
        projectile = sprites.createProjectileFromSprite(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . 5 . . . . . . . . 
            . . . . . . 5 5 4 . . . . . . . 
            . . . . . . 5 4 4 . . . . . . . 
            . . . . . . 4 4 4 . . . . . . . 
            . . . . . . 4 2 2 . . . . . . . 
            . . . . . . 2 2 . 2 . . . . . . 
            . . . . . 2 . 2 . 2 . . . . . . 
            . . . . . 2 . . 2 . . . . . . . 
            . . . . . . . 2 2 . . . . . . . 
            . . . . . . 2 . 2 2 . . . . . . 
            . . . . . . . . 2 . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `, mySprite, -80, -320)
        projectile = sprites.createProjectileFromSprite(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . 5 . . . . . . . . 
            . . . . . . 5 5 4 . . . . . . . 
            . . . . . . 5 4 4 . . . . . . . 
            . . . . . . 4 4 4 . . . . . . . 
            . . . . . . 4 2 2 . . . . . . . 
            . . . . . . 2 2 . 2 . . . . . . 
            . . . . . 2 . 2 . 2 . . . . . . 
            . . . . . 2 . . 2 . . . . . . . 
            . . . . . . . 2 2 . . . . . . . 
            . . . . . . 2 . 2 2 . . . . . . 
            . . . . . . . . 2 . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `, mySprite, 80, -320)
        projectile.startEffect(effects.fire, 500)
        projectile2.startEffect(effects.fire, 500)
        projectile3.startEffect(effects.fire, 500)
    }
})
scene.onOverlapTile(SpriteKind.Enemy, assets.tile`myTile`, function (sprite, location) {
    mySprite2.follow(mySprite, 50)
})
scene.onOverlapTile(SpriteKind.Enemy, sprites.builtin.brick, function (sprite, location) {
    mySprite2.follow(mySprite, 100)
})
sprites.onOverlap(SpriteKind.Enemy, SpriteKind.Player, function (sprite, otherSprite) {
    sprites.destroy(mySprite, effects.fire, 500)
    game.gameOver(false)
})
info.onScore(20, function () {
    tiles.setCurrentTilemap(tilemap`level6`)
    sprites.destroy(mySprite)
    mySprite = sprites.create(img`
        ..f.............
        ..f..1.1.11.....
        ..f..dddddd.....
        ..ff.ddfdfd.....
        ..fd.dddddd.....
        ..dffdfffdd.....
        ..ddf8dddd8dddd.
        ..ddf83dd38d111.
        ....ff888881fbd1
        .....fff888ff411
        .....88fffff4441
        .....88..8814441
        .....88..8811411
        .....88..8811111
        ....eee..eee1111
        ................
        ................
        ................
        ................
        ................
        `, SpriteKind.Player)
    controller.moveSprite(mySprite)
    mySprite.setPosition(69, 92)
})
controller.player2.onEvent(ControllerEvent.Connected, function () {
    mySprite6 = sprites.create(img`
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ..................1.1..............
        .................fd1d..............
        ..........988888.fddd..............
        .........9899889.d8d8f.............
        ........99899889..88821............
        ...88888888888888888888888.........
        ...88888888888888888888888.........
        ..d8fff88888888888888fff88.........
        ....f1f..............f1f...........
        ....fff..............fff...........
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        ...................................
        `, SpriteKind.Player)
    controller.moveSprite(mySprite6, 100, 0)
})
sprites.onOverlap(SpriteKind.Projectile, SpriteKind.Enemy, function (sprite, otherSprite) {
    otherSprite.setVelocity(0, 0)
    animation.runImageAnimation(
    otherSprite,
    [img`
        ....6776776.....
        ..67677677676...
        .7676776776767..
        .7676772776767..
        676767222767676.
        676772222277676.
        676776222677676.
        676776222677676.
        677676727676776.
        677676767676776.
        677676767676776.
        .7767766776677..
        .7767676667677..
        ..76767667767...
        ....6676776.....
        ................
        ................
        ................
        ................
        `,img`
        ................
        .......2........
        ...2..22.2......
        ...2.2.2.2......
        ....22.2.2......
        ..672.2222..6...
        .7672222276767..
        .7676226776767..
        676762262767676.
        676772222277676.
        676776222677676.
        676776222677676.
        677676222676776.
        677676767676776.
        677676767676776.
        .7767766776677..
        .7767676667677..
        ..7676..27767...
        ....22..22......
        `,img`
        ......22..2.....
        .....2....22....
        ......2....2....
        ....62267762.2..
        ..67222627222...
        .767222222276...
        .722222222276...
        .7222222222767..
        67722222222227..
        67722226762227..
        67767676767227.2
        .776776677662.2.
        .............22.
        ................
        ................
        ................
        ................
        ................
        ................
        `,img`
        ................
        ................
        ................
        ................
        ......262.......
        ......222.......
        .....2..22......
        .....22..22.....
        ....222.........
        .....2267.......
        .....6..........
        ................
        ................
        ................
        ................
        ................
        ................
        ................
        ................
        `,img`
        ................
        ................
        ................
        ................
        ................
        ......22........
        .....2..........
        .....22.........
        ......2.........
        ................
        ................
        ................
        ................
        ................
        ................
        ................
        ................
        ................
        ................
        `],
    70,
    false
    )
    pause(350)
    sprites.destroy(otherSprite)
    info.changeScoreBy(10)
})
let mySprite6: Sprite = null
let mySprite2: Sprite = null
let projectile3: Sprite = null
let projectile2: Sprite = null
let projectile: Sprite = null
let projectile5: Sprite = null
let projectile4: Sprite = null
let mySprite: Sprite = null
mySprite = sprites.create(img`
    . . . . . . . . . . . . . . . . 
    . . f . . 1 . 1 . 1 1 . . . . . 
    . . f . . d d d d d d . . . . . 
    . . f f . d d f d f d . . . . . 
    . . f d . d d d d d d . . . . . 
    . . d f f d f f f d d . . . . . 
    . . d d f 8 d d d d 8 d d d . . 
    . . d d f 8 3 d d 3 8 d d d . . 
    . . . . f f 8 8 8 8 8 . d d . . 
    . . . . . f f f 8 8 8 . d d . . 
    . . . . . 8 8 f f f f f f f f . 
    . . . . . 8 8 . . 8 8 f d d f . 
    . . . . . 8 8 . . 8 8 2 2 1 1 . 
    . . . . . 8 8 . . 8 8 1 2 1 1 . 
    . . . . e e e . . e e e 1 2 2 . 
    . . . . . . . . . . . . . . . . 
    `, SpriteKind.Player)
mySprite.setStayInScreen(true)
tiles.setCurrentTilemap(tilemap`level4`)
mySprite.setPosition(69, 92)
controller.moveSprite(mySprite, 100, 0)
info.setScore(0)
game.onUpdateInterval(1000, function () {
    mySprite2 = sprites.create(img`
        . . . . 6 7 7 6 7 7 6 . . . . . 
        . . 6 7 6 7 7 6 7 7 6 7 6 . . . 
        . 7 6 f f 7 7 6 7 7 f f 6 7 . . 
        . 7 6 7 f f 7 6 7 f f 7 6 7 . . 
        6 7 6 7 6 f f 6 f f 6 7 6 7 6 . 
        6 7 6 7 f 6 7 6 7 6 f 7 6 7 6 . 
        6 7 6 7 7 6 7 f 7 6 7 7 6 7 6 . 
        6 7 6 7 7 6 7 7 f 6 7 7 6 7 6 . 
        6 7 7 6 7 6 7 6 7 6 7 6 7 7 6 . 
        6 7 7 6 7 6 f f f 6 7 6 7 7 6 . 
        6 7 7 6 f f f 6 f f 7 6 7 7 6 . 
        . 7 7 f 7 7 6 6 7 7 f 6 7 7 . . 
        . 7 7 6 7 6 7 6 6 6 f 6 7 7 . . 
        . . 7 6 7 6 7 6 6 7 7 6 7 . . . 
        . . . . 6 6 7 6 7 7 6 . . . . . 
        . . . . . . . . . . . . . . . . 
        `, SpriteKind.Enemy)
    mySprite2.setVelocity(0, 50)
    mySprite2.setPosition(randint(0, 150), -1)
})
